<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>

<body>
<canvas id="canvas" width="500" height="500" style="background:#000"></canvas>
<script src="js/utils.js"></script>
<script src="js/arrow.js"></script>
<script>
window.onload=function(){
	var canvas=document.getElementById("canvas"),
	 context=canvas.getContext("2d"),
	 centerX=canvas.width/2,
	 centerY=canvas.height/2;
	 
	 var mouse=utils.captureMouse(canvas);
	 
	 var arrow= new Arrow();
	 arrow.x=centerX;
	 arrow.y=centerY;
	 
	 (function drawFrame(){
		 window.requestAnimationFrame(drawFrame,canvas);
		 context.clearRect(0,0,canvas.width,canvas.height);
		 
		 var dy=mouse.y-arrow.y,dx=mouse.x-arrow.x;

		 arrow.rotation=Math.atan2(dy,dx);
		 arrow.draw(context);
		 		 	 context.moveTo(centerX,centerY);
			 context.lineTo(dx,dy);
			 context.strokeStyle="#fff";
			 context.stroke()
		 console.log(dx,dy,mouse.x,mouse.y,arrow.x,arrow.y,centerX,centerY,arrow.rotation)

		 })();
	}
</script>
</body>
</html>

