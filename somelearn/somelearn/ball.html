<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>

<body>
<canvas id="canvas" width="500" height="500" style="background:#000009"></canvas>
<p id="log"></p>
<script src="js/utils.js"></script>
<script src="js/ball.js"></script>
<script>
window.onload=function(){
	var canvas=document.getElementById("canvas"),
	 context=canvas.getContext("2d"),
	 centerX=canvas.width/2,
	 centerY=canvas.height/2;
	 /*
	 //平滑运动
	 var ball=new Ball();
	 	 ball.x=centerX;
		 ball.y=centerY;
	 var angle=0,range=50;
	 (function drawFrame(){
		 window.requestAnimationFrame(drawFrame,canvas);
		 context.clearRect(0,0,canvas.width,canvas.height);
		 
		 ball.x=centerX+Math.sin(angle)*range;
		 angle+=0.1;
		 ball.draw(context);
		 })()*/
	
	/*线性运动
	var angle=0,
		range=50,
		xspeed=1,
		yspeed=0.05;
	var ball=new Ball();
	(function drawFrame(){
		window.requestAnimationFrame(drawFrame,canvas);
		context.clearRect(0,0,canvas.width,canvas.height);
		
		ball.x+=xspeed;
		if(ball.x>canvas.width+ball.radius){
			ball.x=-ball.radius;
			}
		ball.y=canvas.height/2+Math.sin(angle)*range;
		angle+=0.05;
		ball.draw(context)
		})()*/
		
	//脉冲运动
	/*var angle=0,
		range=0.5,
		speed=0.05,
		centerScale=1;
	var ball=new Ball();
		ball.x=canvas.width/2;
		ball.y=canvas.height/2;
	(function drawFrame(){
		window.requestAnimationFrame(drawFrame,canvas);
		context.clearRect(0,0,canvas.width,canvas.height);
		ball.scaleX=ball.scaleY=centerScale+Math.sin(angle)*range;
		console.log(Math.sin(angle),ball.scaleX)
		angle+=speed;
		ball.draw(context);
		})()*/
		
		
	//正圆周运动
	/*var ball=new Ball();
	var angle=0;
		centerX=canvas.width/2;
		centerY=canvas.height/2;
		radius=100;
		speed=0.05;
	(function drawFrame(){
		window.requestAnimationFrame(drawFrame,canvas);
		context.clearRect(0,0,canvas.width,canvas.height);
		ball.x=centerX+Math.sin(angle)*radius;
		ball.y=centerY+Math.cos(angle)*radius;
		angle+=speed;
		ball.draw(context);
		})()*/
	
	
	//椭圆运动
	/*var ball=new Ball();
	var centerX=canvas.width/2,
		centerY=canvas.height/2,
		angle=0,
		radiusX=50,
		radiusY=100,
		speed=0.05;
		ball.x=centerX;
		ball.y=centerY;
	(function drawFrame(){
		window.requestAnimationFrame(drawFrame,canvas);
		context.clearRect(0,0,canvas.width,canvas.height);
		ball.x=centerX+Math.sin(angle)*radiusX;
		ball.y=centerY+Math.cos(angle)*radiusY;
		angle+=speed;
		ball.draw(context)
		})()*/


	//两点距离
	var log=document.getElementById("log");
	var mouse=utils.captureMouse(canvas);
	var rect={
		x:canvas.width/2,
		y:canvas.height/2
		};
	(function drawFrame(){
		window.requestAnimationFrame(drawFrame,canvas);
		context.clearRect(0,0,canvas.width,canvas.height);
		
		var dx=mouse.x-rect.x,
			dy=mouse.y-rect.y,
			dis=Math.sqrt(dx*dx+dy*dy);
			
			context.fillStyle="#fff";
			context.fillRect(rect.x-2,rect.y-2,4,4);
			
			context.save();
			context.strokeStyle="#fff";
			context.beginPath();
			context.moveTo(rect.x,rect.y);
			context.lineTo(mouse.x,mouse.y);
			context.closePath();
			context.stroke();
			context.restore();
			log.style.left=(mouse.x+rect.x)/2+"px";
			log.style.top=(mouse.y+rect.y)/2+"px";
			log.innerHTML=dis;
		})()
	}
</script>
</body>
</html>

